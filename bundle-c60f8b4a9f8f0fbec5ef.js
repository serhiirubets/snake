!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomInteger=e.loadAudio=e.loadPicture=void 0,e.loadPicture=function(t,e){return new Promise((function(i){t.src=e,t.addEventListener("load",(function(){return i()}))}))},e.loadAudio=function(t){return new Promise((function(e){t.addEventListener("canplaythrough",(function(){return e()}),{once:!0})}))},e.getRandomInteger=function(t,e){var i=t-.5+Math.random()*(e-t+1);return Math.round(i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CellType=e.Key=void 0,function(t){t.arrowRight="ArrowRight",t.arrowLeft="ArrowLeft",t.arrowUp="ArrowUp",t.arrowDown="ArrowDown"}(e.Key||(e.Key={})),function(t){t.bomb="bomb",t.food="food"}(e.CellType||(e.CellType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),n=document.querySelector("#canvas"),r=new o.Game(n);window.addEventListener("load",(function(){return r.start()}))},function(t,e,i){"use strict";var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,n++)o[n]=r[s];return o},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var r=n(i(4)),s=n(i(5)),a=n(i(6)),h=n(i(7)),c=n(i(8)),d=n(i(9)),l=n(i(10)),u=n(i(11)),f=n(i(12)),p=i(0),g=i(13),m=i(15),y=i(16),w={background:r.default,cell:s.default,body:a.default,food:h.default,head:c.default,bomb:d.default},v={bomb:l.default,food:u.default,theme:f.default},b=function(){function t(t){this.canvas=t,this.sprites={},this.sounds={},this.snake=new m.Snake(this),this.width=0,this.height=0,this.score=0,this.ctx=this.canvas.getContext("2d"),this.board=new g.Board(this),this.initDimensions(),this.setEvents(),this.setFonts()}return t.prototype.renderBackground=function(){this.ctx.drawImage(this.sprites.background,(this.width-this.sprites.background.width)/2,(this.height-this.sprites.background.height)/2)},t.prototype.setUpAssets=function(){var t=this;Object.keys(w).forEach((function(e){t.sprites[e]=new Image,t.sprites[e].src=w[e]})),Object.keys(v).forEach((function(e){t.sounds[e]=new Audio(v[e])}))},t.prototype.preloadImageAssets=function(){var t=this;return Object.keys(w).map((function(e){return p.loadPicture(t.sprites[e],w[e])}))},t.prototype.preloadAudioAssets=function(){var t=this;return Object.keys(v).map((function(e){return p.loadAudio(t.sounds[e])}))},t.prototype.preloadAssets=function(){this.preloadedAssets=o(this.preloadImageAssets(),this.preloadAudioAssets())},t.prototype.preload=function(){this.setUpAssets(),this.preloadAssets()},t.prototype.create=function(){this.board.create(),this.snake.create(),this.board.createFood(),this.board.createBomb()},t.prototype.setFonts=function(){this.ctx.font="20px Cocoai",this.ctx.fillStyle="#FFF"},t.prototype.render=function(){this.clearCanvas(),this.renderBackground(),this.board.render(),this.snake.render(),this.ctx.fillText("Score: "+this.score,30,30)},t.prototype.run=function(){var t=this;this.gameInterval=window.setInterval((function(){t.snake.move(),t.render()}),150),this.bombInterval=window.setInterval((function(){t.snake.moving&&t.board.createBomb()}),3e3)},t.prototype.start=function(){var t=this;this.preload(),Promise.all(this.preloadedAssets).then((function(){t.create(),t.run()}))},t.prototype.fitWidth=function(){this.height=Math.floor(this.width*window.innerHeight/window.innerWidth),this.height=Math.min(this.height,y.config.game.max.height),this.height=Math.max(this.height,y.config.game.min.height),this.width=Math.round(window.innerWidth*this.height/window.innerHeight)},t.prototype.fitHeight=function(){this.width=Math.floor(window.innerWidth*y.config.game.max.height/window.innerHeight),this.width=Math.min(this.width,y.config.game.max.width),this.width=Math.max(this.width,y.config.game.min.width),this.height=Math.floor(this.width*window.innerHeight/window.innerWidth)},t.prototype.initDimensions=function(){var t=y.config.game.max.width,e=y.config.game.max.height;y.config.game.min.width,y.config.game.min.height;window.innerWidth/window.innerHeight>t/e?this.fitWidth():this.fitHeight(),this.canvas.style.width="100%",this.canvas.width=this.width,this.canvas.height=this.height},t.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height)},t.prototype.setEvents=function(){var t=this;window.addEventListener("keydown",(function(e){t.snake.start(e.key)}))},t.prototype.stop=function(){clearInterval(this.gameInterval),clearInterval(this.bombInterval),this.sounds.bomb.play(),alert("Game is over"),window.location.reload()},t.prototype.onSnakeStart=function(){this.sounds.theme.loop=!0,this.sounds.theme.play()},t.prototype.onSnakeEat=function(){this.sounds.food.play(),this.board.createFood(),this.score++},t}();e.Game=b},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/background.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/cell.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/body.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/food.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/head.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/bomb.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/bomb.mp3"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/food.mp3"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"assets/theme.mp3"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Board=void 0;var o=i(14),n=i(0),r=i(1),s=function(){function t(t){this.game=t,this.size=15,this.cells=[]}return t.prototype.render=function(){var t=this;this.cells.forEach((function(e){t.game.ctx.drawImage(t.game.sprites.cell,e.x,e.y),e.type&&t.game.ctx.drawImage(t.game.sprites[e.type],e.x,e.y)}))},t.prototype.getRandomAvailableCell=function(){var t=this,e=this.cells.filter((function(e){return!t.game.snake.hasCell(e)&&!e.type}));return e[n.getRandomInteger(0,e.length-1)]},t.prototype.createCellObject=function(t){var e=this.cells.find((function(e){return e.type===t}));e&&(e.type=void 0),this.getRandomAvailableCell().type=t},t.prototype.createFood=function(){this.createCellObject(r.CellType.food)},t.prototype.createBomb=function(){this.createCellObject(r.CellType.bomb)},t.prototype.create=function(){for(var t=this.game.sprites.cell.width+1,e=(this.game.width-t*this.size)/2,i=(this.game.height-t*this.size)/2,n=0;n<this.size;n++)for(var r=0;r<this.size;r++){var s=e+t*r,a=i+t*n;this.cells.push(new o.Cell(s,a,n,r))}},t.prototype.getCell=function(t,e){return this.cells.find((function(i){return i.row===t&&i.col===e}))},t.prototype.isFoodCell=function(t){return t.type===r.CellType.food},t.prototype.isBombCell=function(t){return t.type===r.CellType.bomb},t}();e.Board=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=void 0;var o=function(t,e,i,o){this.x=t,this.y=e,this.row=i,this.col=o};e.Cell=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Snake=void 0;var o=i(1),n={row:-1,col:0,angle:0},r={row:1,col:0,angle:180},s={row:0,col:-1,angle:270},a={row:0,col:1,angle:90},h=function(){function t(t){this.game=t,this.moving=!1,this.cells=[],this.direction={row:0,col:0,angle:0}}return t.prototype.renderHead=function(){var t=this.cells[0],e=this.game.sprites.head.width/2;this.game.ctx.save(),this.game.ctx.translate(t.x+e,t.y+e),this.game.ctx.rotate(this.direction.angle*Math.PI/180),this.game.ctx.drawImage(this.game.sprites.head,-e,-e),this.game.ctx.restore()},t.prototype.renderBody=function(){for(var t=1;t<this.cells.length;t++){var e=this.cells[t];this.game.ctx.drawImage(this.game.sprites.body,e.x,e.y)}},t.prototype.render=function(){this.renderHead(),this.renderBody()},t.prototype.create=function(){var t=this;this.direction=n,[{row:5,col:5},{row:6,col:5}].forEach((function(e){var i=t.game.board.getCell(e.row,e.col);i&&t.cells.push(i)}))},t.prototype.move=function(){if(this.moving){var t=this.getNextCell();!t||this.hasCell(t)||this.game.board.isBombCell(t)?this.game.stop():(this.cells.unshift(t),this.game.board.isFoodCell(t)?this.game.onSnakeEat():this.cells.pop())}},t.prototype.getNextCell=function(){var t=this.cells[0],e=t.row+this.direction.row,i=t.col+this.direction.col;return this.game.board.getCell(e,i)},t.prototype.start=function(t){switch(this.moving||this.game.onSnakeStart(),this.moving=!0,t){case o.Key.arrowDown:this.direction=r;break;case o.Key.arrowLeft:this.direction=s;break;case o.Key.arrowRight:this.direction=a;break;case o.Key.arrowUp:this.direction=n}},t.prototype.hasCell=function(t){return this.cells.find((function(e){return e===t}))},t}();e.Snake=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={game:{max:{width:640,height:360},min:{width:300,height:300}}}}]);